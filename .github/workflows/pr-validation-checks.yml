name: 'PR Validation/Checks'

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  check-changeset:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - uses: dorny/paths-filter@v3
        id: filter
        with:
          filters: |
            changeset:
              - '.changeset/**'
      - name: Inform about missing changeset
        if: steps.filter.outputs.changeset == 'false'
        uses: peter-evans/create-or-update-comment@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            🙋‍♂️ Hey, thanks for creating a PR and contributing! It looks like *no changeset changes were found* for this pull request.  

            **What are Changesets?**:
                
            In short, Changesets are used to describe the changes in your PR and help the release process generate version bumps and changelog entries.  

            You can find more about changesets and how to use them here:
            - [Introduction to using Changesets](https://github.com/changesets/changesets/blob/main/docs/intro-to-using-changesets.md)
            - [A Detailed Explanation of Changesets](https://github.com/changesets/changesets/blob/main/docs/detailed-explanation.md)

            If your PR does not require a new release or changeset, you can ignore this. Otherwise, please create a changeset by running:

            ```bash
            npm run changeset
            ```

            This will guide you to create a small markdown file in the `.changeset/` folder describing your changes.
